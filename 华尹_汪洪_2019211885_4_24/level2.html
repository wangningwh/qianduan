<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网抑云音乐</title>
    <style>
        .wrapbox{
            display: flex;
            width: 1200px;
            height: 620px;
            border: 2px solid white;
            justify-content: space-around;
            align-items:center;
            flex-wrap:wrap;
        }
        .sousuo{
            display: flex;
            width: 1200px;
            height: 1600px;
            border: 2px solid #906;
            justify-content: flex-start;
            align-items:flex-start;
            flex-wrap:wrap;
        }
        .box{
            width: 200px;
            height: 300px;
            border: 2px solid white;
        }
        .box-song{
            width: 400px;
            height: 2000px;
            border: 2px solid white;
            justify-content: space-around;
        }
        .box-person{
            width: 200px;
            height: 2000px;
            border: 2px solid white;
            justify-content: space-around;
        }
        .box-c{
            width: 500px;
            height: 2000px;
            border: 2px solid white;
            justify-content: flex-end;
        }
        .box-1{
            width: 400px;
            height: 50px;
            border: 2px solid white;
            justify-content: space-around;
        }
    </style>
</head>
<body>
    <button>点击发送请求</button>
    
    <div class="wrapbox" id="推荐">
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
        <div class="box">
            <img src=''width='200px' height="200px">
            <div></div>
        </div>
    </div>
    <input id="geming"><button>搜索</button>
    <div class="sousuo" id="搜索">
        <div class="box-song">
            <div class='box-1'><h4>歌名</h4></div>
            <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        </div>
        <div class="box-person">
            <div class='box-1'><h4>歌手</h4></div>
            <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        </div>
        <div class="box-c">
            <div class='box-1'><h4>专辑</h4></div>
            <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        <div class='box-1'></div>
        </div>
    </div>
    <script>
        const btn=document.getElementsByTagName('button')[0];
        const box=document.getElementById('推荐');
        const sousuo=document.getElementsByTagName('button')[1];
        const boxline=document.getElementById('搜索');
        const input=document.getElementById('geming');
        const xhr=new XMLHttpRequest();
        btn.onclick=function(){
            total('GET','http://musicapi.leanapp.cn/personalized?limit=10');
            
            xhr.onreadystatechange=function(){
                if(xhr.readyState===4){
                    if(xhr.status>=200&&xhr.status<300){
                        console.log(xhr.response);
                        for(let i=0;i<10;i++){
                            // box[i].src=xhr.response.result[i].picUrl
                            box.children[i].children[0].src=(''+xhr.response.result[i].picUrl);
                            let name=xhr.response.result[i].name+'';
                            name=name.replace('"','');
                            box.children[i].children[1].innerHTML=(""+name);
                        }
                    }
                }
            }
        }
        sousuo.onclick=function(){
            let geming=input.value;
            total('GET','http://musicapi.leanapp.cn/search?keywords='+geming);
            
            xhr.onreadystatechange=function(){
                if(xhr.readyState===4){
                    if(xhr.status>=200&&xhr.status<300){
                        console.log(xhr.response);
                        for(let i=1;i<31;i++){
                            boxline.children[0].children[i].innerHTML=(xhr.response.result.songs[i].name);
                            boxline.children[1].children[i].innerHTML=(xhr.response.result.songs[i].artists[0].name);
                            boxline.children[2].children[i].innerHTML=(xhr.response.result.songs[i].album.name);

                        }
                    }
                }
            }
        }
        function total(tmp,Url){
            if(tmp=='GET'){
            xhr.responseType='json';
            let geming=input.value;
            xhr.open("GET",''+Url);
            xhr.send();
            }
            else if(tmp=='POST'){
                
            xhr.responseType='json';
            let geming=input.value;
            xhr.open("POST",''+Url);
            xhr.send();
            }
        }
    </script>
</body>
</html>